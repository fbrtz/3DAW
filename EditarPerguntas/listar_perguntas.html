<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8">

        <style>
            table { border-collapse: collapse; margin-top: 10px; }
            th, td { border: 1px solid #000; padding: 5px; text-align: left; }
            button { margin: 5px; }
        </style>
    </head>
    <body>
        <h2>Lista de Perguntas</h2>
        <button onclick="redirecionar()">Buscar Por Id</button>
        <div id="tabela"></div>

        <script>
            function redirecionar(){
                window.location.href = "editar_por_id.html";
            }

            var xhr = new XMLHttpRequest;
            xhr.open('GET','listar_perguntas.php', true);
            xhr.onload = function(){
                var resultado = JSON.parse(xhr.responseText);
                var container = document.getElementById('tabela');
                var tabela = '<table><tr>';

                resultado.headers.forEach(h => tabela += `<th> ${h} </th>`);

                tabela+='<th>Ações</th></tr>';

                resultado.data.forEach(item =>{
                    tabela += '<tr>';
                    resultado.headers.forEach(h=> tabela += `<td> ${item[h]} </td>`);
                    tabela += `
                    <td>
                        <form action="editar_pergunta.html" method="GET" style="display:inline">
                            <input type="hidden" name="id" value="${item.id}">
                            <button type="submit">Alterar</button>
                        </form>
                    </td>
                </tr>`;
                });

                tabela += '</table>';
                container.innerHTML = tabela;
            }
            xhr.send();
        </script>
    </body>
</html>